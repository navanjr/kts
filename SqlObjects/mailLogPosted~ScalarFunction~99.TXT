create function dbo.mailLogPosted(@logId int)
returns varchar(10)
as
begin
 declare @isPosted varchar(10)
 select @isPosted=case when exists (select * from paid where mailLogId=@logId and isnull(slink,'')>' 0') then 'Posted' else '' end
 if @isPosted='Posted'
  return @isPosted

 select @isPosted = case when c10 <> 'NEW' then 'Posted' else '' end from object where id = @logId

 return @isPosted

end