create TRIGGER dbo.invoicesModifiedTR ON dbo.invoices
AFTER UPDATE 
AS

 if (@@ROWCOUNT = 0)
  return

 declare 
  @apiDateWas datetime,
  @apiDateIs datetime

 select @apiDateWas = apiUpdated from deleted
 select @apiDateIs = apiUpdated from inserted

-- exec dbo.logit @@procid, 'was...', @apiDateWas, 'Is...', @apiDateIs 
 
 if not isnull(@apiDateIs,0) > isnull(@apiDateWas,0)
  UPDATE dbo.invoices
    SET modified = GETDATE()
    WHERE ID IN (SELECT DISTINCT ID FROM Inserted)

  exec dbo.logit @@procid, 'Just ran the update...', @@rowCount, 'was...', @apiDateWas, 'Is...', @apiDateIs 
