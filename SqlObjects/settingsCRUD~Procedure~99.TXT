create proc dbo.settingsCRUD(
 @settingName varchar(50) = null,
 @settingValue varchar(150) = null,
 @settingId int = null,
 @method varchar(10) = 'POST',
 @verbose varchar(5) = 'FALSE',
 @valueOut varchar(max) = null output
) as
begin
 set nocount on
  if @method = 'POST'
 begin
  if exists(select * from settings where settingName = @settingName)
   update settings set settingValue = @settingValue where settingName = @settingName
  else
   insert settings (settingName, settingValue) select @settingName, @settingValue
 end

 if @method = 'GET'
 begin
  if @settingId is null
  begin
   select @valueOut = settingValue from dbo.settings where settingName = @settingName
   if @verbose = 'TRUE'
    select @valueOut as settingValue
   return
  end
  else
  begin
   select @valueOut ='@name=' + settingName + ';@value=' + settingValue + ';'  from dbo.settings where id = @settingId
   if @verbose = 'TRUE'
    select @valueOut as settingValue
   return
  end
 end

 if @method = 'DELETE' and @settingId is not null
 begin
  delete settings where id = @settingId
 end


end