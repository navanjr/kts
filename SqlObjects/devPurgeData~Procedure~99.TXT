create procedure dbo.devPurgeData( @mode int, @focusString varchar(50) = '') as
begin

 declare @types table(id int)
 declare @slinks table(slink varchar(15))
 

-- glData
--if isnull(@focusString,'') in ('','glDetail')
--begin
-- truncate table glDetail
-- truncate table glDetailStage
--end

-- invoices
if isnull(@focusString,'') in ('','invoices')
begin
 insert @slinks select 't'+cast(id as varchar) from invoices 
 truncate table invoices
 truncate table taxRollDetail
 insert @types select 4001
end

-- receipts
if isnull(@focusString,'') in ('','receipts')
begin
 insert @types select 4502
 insert @slinks select 'o'+cast(id as varchar) from object where typ = 4502
 insert @slinks select 'l'+cast(id as varchar) from receiptLink
 truncate table receiptDetail
 truncate table receiptLink
 truncate table paid
end

-- Journal Entries
if isnull(@focusString,'') in ('','journalEntries')
begin
 insert @types select 4512
 insert @slinks select 'o'+cast(id as varchar) from object where typ = 4512
 insert @slinks select 'j'+cast(id as varchar) from journalLink
 truncate table journalLink 
end

-- vouchers
if isnull(@focusString,'') in ('','payments')
begin
 insert @types select 4771
 insert @slinks select 'o'+cast(id as varchar) from object where typ = 4771
end


if isnull(@focusString,'') in ('')
begin
 insert @types select 4780
 insert @types select 4704
 insert @types select 4509
 insert @types select 4513
-- insert @types select 4700 -- lets save the fiscal calendar for now :)
 insert @types select 4101
 insert @types select 4100
 insert @types select 4508
 insert @types select 4507
 insert @types select 4522
 insert @types select 4524

 insert @types
  select typ from object where typ < 0 group by typ
-- remove glAccounts 
 delete object where typ = 4701 and a16 = 'KTS'

end

if @mode = 1
begin
 delete object where typ in (select id from @types)
 delete gldetail where slink in (select slink from @slinks)
 delete gldetailStage where slink in (select slink from @slinks)
end
else
begin
 select * from @types
 select * from @slinks
end

 return
end
