create procedure dbo.keyTemplateWriteToRepo( @id int )
as
begin
 
 declare
  @gitCommitter varchar(10),
  @txt varchar(max),
  @path varchar(100),
  @fullPath varchar(1000)

 exec dbo.keyReturnIniValue
  'c:\kellpro.ini',
  @section = 'git',
  @field = 'committer',
  @value = @gitCommitter out 

-- bail if we are not a git committer
 if not isnull(@gitCommitter,'FALSE') = 'TRUE'
 begin
  exec dbo.logit @@procid, 'not a git Committer'
  return
 end

 select
  @txt = cast(options as varchar(max))
 from template where id = @id

 exec dbo.keyReturnIniValue
  'c:\kellpro.ini',
  @section = 'git',
  @field = 'path',
  @value = @path out 

 set @fullPath = @path + '\templates\T_' + cast(@id as varchar) + '.TXT'  
 
 exec dbo.spOverwriteTextFile
  @fileName = @fullPath,
  @text = @txt

end