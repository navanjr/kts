create procedure [dbo].[assessReferenceCRUD](
 @assessmentId int,
 @newId int output
) as
begin

 -- insert tax reference invoice
 if not exists(select * from invoices where taxrollId=@assessmentId and [TYP]='S')
  begin
   insert invoices ([TAXROLLID],[TYP],[PARCEL],[ITEM],[TAXYEAR],[NAME],[BUSINESSNAME],[POSTDATE],[STATUS],[interestDate])
   select
    [ID],
    'S',
    key1,
    cast(key3 as numeric(7,1)),
    cast(a18 as numeric (5)),
    a1,
    '',
    key2,
    a17,
    case when isnumeric(b3)=1 then cast(b3 as int)-1 else 0 end
   from object where id = @assessmentId

   set @newId = @@identity

   exec dbo.logit @@procId, 'inserted into object.... @newId', @newId

  end

end