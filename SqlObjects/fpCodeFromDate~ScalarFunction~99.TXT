create function dbo.fpCodeFromDate(
 @date int
) returns varchar(50) as
begin
 set @date = coalesce(@date,dbo.clarionToday())
 return (select fpCode from dbo.fiscalCalendar where @date between startDate and endDate)
end