create function dbo.docDTypeToggle(
 @id int,
 @blob varchar(max)
) returns varchar(max) as
begin
 declare @returnMax varchar(max) = ''
 
 if isnull(@blob,'') < '  0' 
  select @blob = isnull(@blob,'') + cast(id as varchar) + ':0|' from dbo.docDTypes('') 

 declare @wt table(id int,switch int)
 insert @wt select
  dbo.splitF(data,':',1),
  dbo.splitF(data,':',2)
 from dbo.split(@blob,'|') where data > '  0'

 update @wt set switch = case when switch = 1 then 0 else 1 end where id = @id

 select @returnMax = @returnMax + cast(id as varchar) + ':' + cast(switch as varchar) + '|' from @wt order by id
 return @returnMax
end