create proc dbo.voucherCRUD(
 @mode int,
 @voucherDate varchar(50),
 @voucherNumber varchar(50),
 @payee varchar(50),
 @amount varchar(50),
 @debitAcct varchar(50),
 @creditAcct varchar(50) 
) as 
begin

 if @mode = 0
 begin

  insert object (
   typ,
   key1,
   key2,
   key3,
   a1,
   a2,
   a4,
   b3,
   a5,
   b4
  )
  select 
   4771,
   dbo.nextObjectAutoNumber(4771),
   @voucherDate,
   @voucherNumber,
   @payee,
   @amount,
   d.accountCode,d.accountDesc,
   c.accountCode,c.accountDesc
   from glAccounts d, glAccounts c
   where d.accountCode = @debitAcct 
    and c.accountCode = @creditAcct
 
  -- stage glDetail

  -- post gl
     
 end

 return
end

