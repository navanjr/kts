create procedure dbo.mortgageDetailCRUD(
 @receiptId int,
 @receiptTyp int

) as
begin

 declare 
  @receiptDetailId int,
  @mortgagor varchar(50),
  @mortgagee varchar(50),
  @description varchar(50),
  @section varchar(50),
  @township varchar(50),
  @range varchar(50)


 -- retrieve the specifics from the mortgageInfo in object
 select
  @receiptDetailId = link5,
  @mortgagor = a3,
  @mortgagee = a4,
  @description = a5,
  @section = a7,
  @township = a8,
  @range = a9
 from object where typ = @receiptTyp and id = @receiptId

  if isnull(@receiptDetailId,0) = 0
  begin
   insert object (typ,link1,key1,key2,d1,key3,a1,a2) 
    select
     4507,
     @receiptId,
     @mortgagor,
     @mortgagee,
     @description,
     @section,
     @township,
     @range
   end
  else
   begin 
   update object set 
     key1 = @mortgagor,
     key2 = @mortgagee,
     d1 = @description,
     key3 = @section,
     a1 = @township,
     a2 = @range
   where id = @receiptDetailId
  end
end
