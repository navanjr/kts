create function dbo.taxrollFeesBrw(@invoiceId int)
returns @rt table(
 invoiceId int,
 PostDate varchar(20),
 taxYear varchar(50),
 typ varchar(5),
 description varchar(50),
 invoiceAmount varchar(50),
 invoiceDue varchar(50))   
 as 
begin

if @invoiceId>0
 begin
 insert @rt 
  select ID,PostDate,taxYear,TYP,'',invoiceAmount,invoiceDue from invoices where invoiceId = @invoiceId and typ='f'

  update @rt set 
   description = accountDesc 
   from gldetail
   inner join @rt on slink = 't'+cast(invoiceId as varchar)
   inner join object o on accountId = o.id
   where o.a1='source' 
 end  

return
end