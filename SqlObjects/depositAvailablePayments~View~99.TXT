create view dbo.depositAvailablePayments as

 select
  a.*,
  b.a1 as receivedOf,
  b.key3 as receiptType,
  d.ID as receiptTypeId,
  b.a18 as deputy,
  b.key1 as receiptNo,
  c.a2 as paycodeDepositType,
  b.key2 as receiptPostDate,
  dbo.date1(b.key2) as receiptPostDate1,
  b.b13 as station,
  b.key1 as parentControlNumber
 from
  paid a,
  object b, 
  object c,
  Object d
 where b.typ in (4502,4522)
 and c.typ = 4505
 and d.Typ = 4503
 and a.paycode=c.key1 
 and a.slink = 'o' + cast(b.id as varchar)
 and b.Key3 = d.key1
 and b.a17 = 'Posted'
