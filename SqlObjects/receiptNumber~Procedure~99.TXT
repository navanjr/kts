create procedure dbo.receiptNumber(
 @receiptId int,
 @series varchar(50)
) as
begin
  declare 
    @retval nvarchar(max),
    @objectType int

  select @objectType=typ from object where id=@receiptId
   

  exec dbo.nextObjectAutoNumber @objectType, @series, @newNumber = @retval output

  update object set key1=@retval where typ=@objectType and id=@receiptId
end