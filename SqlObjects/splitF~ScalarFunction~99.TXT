create function splitF(
 @blob varchar(max),
 @delimiter varchar(max), 
 @occurance int
) returns varchar(max) as
begin

 declare @retString varchar(max)

 if @occurance < 0
  select @occurance = count(*) - abs(@occurance + 1) from dbo.split(@blob,@delimiter)

 select @retString = data from dbo.split(@blob,@delimiter) where id = @occurance

 return isnull(@retString,'')
 
end
