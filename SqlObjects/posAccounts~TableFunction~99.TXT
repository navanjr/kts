create function dbo.posAccounts() returns @rt table(
 receiptType varchar(50),
 paycode varchar(50),
 accountCode varchar(50),
 accountId int,
 postDate int
) as 
begin

 declare
  @posName varchar(50)

 select @posName = dbo.readString('@posName=',dbo.whoAmI())

 insert @rt
 select 
  a.key1,
  b.key1,
  @posName + '.' + a.key1 + '.' + b.key1,
  0,
  a.a17
 from object a, object b
 where a.typ = 4503 and b.typ = 4505
  and a.key1 > '  0'
  and a.key2 > '  0'
  and b.key1 > '  0'
  and not (LEFT(a.key1,3)='TAX' and LEN(a.key1) > 3)
  and a.c1 != '1'

 update a set a.accountId = o.accountId from @rt a, dbo.glAccounts o where a.accountCode = o.accountCode

 return
end