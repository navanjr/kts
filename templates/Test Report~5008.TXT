** this is a test report written by Nate
@bb7=&Print; @bbproc7=testreportSLS=;

@testreport=
 do(452,getSiteInfo=),
  lcLm=600,
  lcTm=250,
  lcM=1000,
  lcCw=2250,
  lcAw=(lcCw*1.5)+(lcM*4),
  lcFont='',
  lcHeaderFontSize=12,
  lcRecCnt=0,
  gcSQLcmd5008='select accountCode, accountDesc, accountBalance, accountType from dbo.glAccounts where cast(accountBalance as money) <> 0 order by accountType, accountCode',
  lcDCW=2000,
  lcDCWn='1000R',
  gcBalanceGrandTotal=0,
  lcGrpName='',

 tr(
  prn(printed),prn(page),
  prn(gcCounty&' County',t1),
  prn('Fund Report',t2),
  prn('(confidential)',t3),

  grp(1,obj5:a4,
   do(
    bnd('H',obj5:a4,lcDCW),  
   ),
   do(
    bnd('H',,lcDCW,lcGrpName&' Total',lcDCW&'R',format(gcBalanceGroupTotal,@n$-15.2b),1000R),
    gcBalanceGroupTotal=0,  
    nl,
   ),
  ),

  prn(,2000),
  bnd('HU','Code',lcDCW,'Name',lcDCW,'Balance',lcDCWn),

  det(gcSQLcmd5008),
   gcBalanceGroupTotal=gcBalanceGroupTotal+obj5:a3,
   bnd('D','    '&obj5:a1,lcDCW,obj5:a2,lcDCW,format(obj5:a3,@n-15.2b),1000R),
   gcBalanceGrandTotal=gcBalanceGrandTotal+obj5:a3,
   lcGrpName=obj5:a4,
  edt,

  bnd('H',,lcDCW,,lcDCW&'R','==============',lcDCWn),  
  bnd('D',,lcDCW,'Grand Total',lcDCW&'R',format(gcBalanceGrandTotal,@n$-15.2b),lcDCWn),  
 );



/*** this is a test Special Apportionment report by Steve***/
@testreportSLS=
 do(452,getSiteInfo=),
 lcDate=gcApportionToDate,
 lcsql='select accountId as id,accountCode,accountDesc,Comment,amount from dbo.apportionCollectionsBRW('&gc4794id+0&','&gcApportionToDate+0&') order by contraAccountCode, acrAccountCode, id',

 lcDetFont='Arial',
 lcFont='Arial',
 lcFontSize=12,

tr(
  landscape,
  lcx=400,
  lcTm=400,
  box(lcx,lcTm,lcx+3000,lcTm+550,0),
  prn(printed),
  prn(page),
  lcy=lcTm+100,
  prn(gcCounty&' County Treasurer',lcx+1000,lcy,lcFontSize-2,,lcFont),
  lcy=lcy+200,
  prn(gcOfficial,lcx+1000,lcy),
  prn('Special Apportionment',t1),
  prn(gcCounty&' County',t2), 
  prn(gcCity&', '&gcState,t3), 
  prn('Receipt Date: '&format(lcDate,@d1),t4),
  prn(,lcx),
  bnd('HU','Account Code',2000,'Description',3000,'Comments',2000,'Balance   ',1000R),
 
 det(lcsql),
   prn(,,,lcFontSize-2,,lcDetFont),
   bnd('D',obj5:a2,2000,obj5:a3,3000,obj5:a4,2000,format(obj5:a5,@n$-14.2),1000R,
 edt,
 
 );


/*** this is a test unstaged apportionment report by Steve - uses fixed dates for now***/
@testreportSLS999=
 do(452,getSiteInfo=),
 lcsql='select accountCode,accountDesc,sum(amount) as amount from dbo.rpMonthEndDetail(''77405'',''77435'',''TRUE'') where journalType=''APPORTIONMENT'' and accountType in (select accountType from dbo.glBankFundTypes(''FUND'')) group by accountCode,accountDesc',

 lcDetFont='Arial',
 lcFont='Arial',
 lcFontSize=12,
 
tr(
  lcx=400,
  lcTm=400,
  box(lcx,lcTm,lcx+3000,lcTm+550,0),
  prn(printed),
  prn(page),
  lcy=lcTm+100,
  prn(gcCounty&' COUNTY TREASURER',lcx+1000,lcy,lcFontSize-2,,lcFont),
  lcy=lcy+200,
  prn(gcOfficial,lcx+1000,lcy),
  prn('Staged Apportionment',t1),
  prn(gcCounty&' County',t2), 
  prn(gcCity&', '&gcState,t3), 
  prn(format(gcBeginDate,@d1)&' - '&format(gcEndDate,@d1),t4),
  prn(,lcx),
  bnd('HU','Name',2500,'Account Code',1500,'Balance   ',1000R),
 
 det(lcsql),
   prn(,,,lcFontSize-2,,lcDetFont),
   bnd('D',obj5:a2,1500,obj5:a1,2500,format(obj5:a3,@n$-14.2),1000R,
  edt,
  nl,
 );
